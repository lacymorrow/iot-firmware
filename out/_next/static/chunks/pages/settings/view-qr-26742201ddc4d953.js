(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{6286:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/view-qr",function(){return r(7223)}])},7793:function(e,t,r){"use strict";var n=r(5893),o=r(7294),a=r(2592),c=r(8893);t.Z=e=>{let{data:t}=e,r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{t&&"undefined"!==t&&a.toCanvas(r.current,t,async e=>{var r,n;e&&await (null===(n=window.pywebview)||void 0===n?void 0:null===(r=n.api)||void 0===r?void 0:r.log(e)),await (0,c.Z)("Created QR: ".concat(t))})},[t]),(0,n.jsx)("canvas",{ref:r})}},802:function(e,t,r){"use strict";r.d(t,{d:function(){return s},z:function(){return l}});var n=r(5893),o=r(7294),a=r(8426),c=r(2003),i=r(7537);let s=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,size:c,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(s({variant:o,size:c,className:r})),ref:t,...u})});l.displayName="Button"},7738:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return c},aY:function(){return u},ll:function(){return s}});var n=r(5893),o=r(7294),a=r(7537);let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...o})});c.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader";let s=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...o})});s.displayName="CardTitle";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...o})});l.displayName="CardDescription";let u=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...o})});u.displayName="CardContent";let d=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...o})});d.displayName="CardFooter"},4334:function(e,t,r){"use strict";var n=r(9734),o=r(1473);t.Z=e=>{let{data:t,error:r}=(0,n.ZP)("/hardware-id",o.Od,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,...e});return{hwid:t,isLoading:!r&&!t,isError:r}}},1473:function(e,t,r){"use strict";r.d(t,{FS:function(){return _},ld:function(){return E},uT:function(){return f},Od:function(){return w},I_:function(){return v},GI:function(){return h},M7:function(){return g},sc:function(){return p},wl:function(){return y},Sj:function(){return m},b:function(){return x},Hu:function(){return N},Cz:function(){return b}});var n=r(9734),o=r(5752),a=r(7478),c=r(8893),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,a.H_)(async()=>{try{var r,n;if(!(null===(n=window.pywebview)||void 0===n?void 0:null===(r=n.api)||void 0===r?void 0:r[e]))throw Error("API endpoint not found");await (0,c.Z)("PyCall ".concat(e),t);let o=await window.pywebview.api[e](t).then(e=>JSON.parse(e)).then(async t=>{if(null==t?void 0:t.error)throw t.error;if(void 0===t.message)throw Error("Response message was empty ".concat(t));return await (0,c.Z)("Pycall ".concat(e," returned: ").concat(t.message),t),t.message});return o}catch(r){let t="".concat(r);throw r instanceof Error&&(t=r.message),await (0,c.Z)("Pycall ".concat(e," (retrying): ").concat(t)),Error(t)}},o.Z.RETRY_DELAY,o.Z.MAX_RETRIES).catch(async t=>{let r="".concat(e," - ").concat(t);throw t instanceof Error&&(r=t.message),await (0,c.Z)("Pycall ".concat(e," - FATAL ERROR: ").concat(r)),Error(r)})};let s=e=>i("get",{key:e}).then(e=>{console.log("Got: ",e);try{return JSON.parse(e)}catch(t){return e}}).catch(e=>(console.log("pyget error: ".concat(e)),"")),l=(e,t)=>(console.log("Setting: ".concat(e,", ").concat(t)),i("set",{key:e,data:t}).catch(e=>(console.log("Pyset error: ",e),""))),u=()=>i("deviceOn").catch(()=>"error"),d=()=>i("deviceOff").catch(()=>"error"),f=()=>i("getDeviceStatus").catch(()=>"error"),w=()=>i("getHardwareId").catch(()=>""),h=async()=>{let e=await (0,a.Vs)(i("checkWifiConnection").catch(()=>!1),o.Z.NETWORK_TIMEOUT);return e},v=()=>i("getIpAddress").catch(()=>""),g=()=>s("network_list"),p=async()=>{let e=await i("getTemperatureHumidity").catch(()=>({temperature:"---",humidity:"---"}));return e},y=async()=>{let e=await i("getWifiInfo").catch(()=>({ssid:"error",quality:0})),t=Math.round(Number.parseInt(e.quality,10)/70*100);return{ssid:e.ssid,quality:t}},m=async()=>{let e=await i("getWifiNetworks").catch(()=>""),t=e.split("ESSID:").map(e=>e.trim().replace(/^"|"$/g,"")).filter((e,t,r)=>r.indexOf(e)===t).filter(e=>e);return t},x=async e=>{console.log("setDevicePower> Setting device power to ".concat(e)),await (0,n.JG)("/device-power",e),e?console.log(await u()):console.log(await d())},b=async(e,t)=>{let r=await i("setWifiNetwork",{ssid:e,password:t});return r},N=async(e,t)=>{let r=await s("network_list"),n="object"==typeof r?await l("network_list",{...r,[e]:t}):await l("network_list",{[e]:t});return n},_=e=>i("add_cron_job",{cron:e}).catch(e=>"createCron error: ".concat(e)),E=async()=>{let e=await i("list_cron_jobs").catch(e=>"getCrons error: ".concat(e));return e}},8893:function(e,t,r){"use strict";var n=r(5752),o=r(7478);let a=async function(e){for(var t,r,a=arguments.length,c=Array(a>1?a-1:0),i=1;i<a;i++)c[i-1]=arguments[i];(null===(r=window.pywebview)||void 0===r?void 0:null===(t=r.api)||void 0===t?void 0:t.log)?(console.log("[Pylog] ".concat(e),...c),await (0,o.Vs)((async()=>(await window.pywebview.api.log(e),!0))(),n.Z.TIMEOUT).catch(t=>console.log("[Pylog] ".concat(e," error: ").concat(t)))):console.log("[Pylog Error] ".concat(e),...c)};t.Z=a},7223:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(1664),a=r.n(o),c=r(7738),i=r(7793),s=r(4334),l=r(802);t.default=()=>{let{hwid:e}=(0,s.Z)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,n.jsxs)(c.Ol,{children:[(0,n.jsx)(c.ll,{children:"QR Code"}),(0,n.jsx)(c.SZ,{children:"Scan the QR code with your phone or laptop to control your device from anywhere."})]}),(0,n.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,n.jsx)(i.Z,{data:e})}),(0,n.jsx)(a(),{className:(0,l.d)(),href:"/dashboard",passHref:!0,children:"Back"})]})})}},7478:function(e,t,r){"use strict";r.d(t,{H_:function(){return a},Vs:function(){return n}});let n=(e,t)=>{let r;return Promise.race([e,new Promise((e,n)=>r=setTimeout(()=>n(Error("timeout")),t))]).finally(()=>clearTimeout(r))},o=e=>new Promise(t=>setTimeout(t,e)),a=(e,t,r)=>new Promise((n,c)=>e().then(n).catch(i=>r>0?o(t).then(a.bind(null,e,t,r-1)).then(n).catch(e=>{let t="Operation failed";e instanceof Error&&(t=e.message),c(t)}):c(i)))}},function(e){e.O(0,[436,664,592,774,888,179],function(){return e(e.s=6286)}),_N_E=e.O()}]);