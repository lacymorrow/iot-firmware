(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{503:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wifi",function(){return s(8381)}])},8381:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return _}});var t=s(5893),i=s(7294),a=s(4011),l=s(452),r=s(7920),c=s(6886),o=s(1222),d=s(135),u=s(3217),h=s(2888),x=s(4464),f=s(1607),j=s(1664),w=s.n(j),m=s(9734),v=s(5754),Z=s(7537),p=s(1473),g=s(5752),N=e=>{let{data:n,error:s,mutate:t}=(0,m.ZP)("/wifi-info",p.wl,{refreshInterval:g.Z.NETWORK_TIMEOUT,refreshWhenHidden:!1,refreshWhenOffline:!0,revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,...e});return{data:n,mutate:t,isLoading:!s&&!n,isError:s}},C=s(8893);let E="w-full h-full flex gap-2";var _=()=>{let{data:e,mutate:n,isError:s}=N(),{data:j}=(0,m.ZP)("/saved-networks",p.M7),_=(0,i.useRef)(null),S=(0,i.useRef)(null),[b,k]=(0,i.useState)(""),[F,O]=(0,i.useState)([]),[P,y]=(0,i.useState)(""),[I,T]=(0,i.useState)(!0),[W,z]=(0,i.useState)(!0),[R,H]=(0,i.useState)(!1),D=async()=>{z(!0);let e=await (0,p.Sj)();console.log(e),O(e),z(!1)},M=()=>{!P&&(null==e?void 0:e.ssid)&&(null==j?void 0:j[e.ssid])&&y(j[e.ssid])},G=async()=>{b&&(H(!0),await (0,C.Z)("WiFi Connect ".concat(b,":").concat(P)),await (0,p.Cz)(b,P).then(e=>(0,C.Z)("Connect WiFi: ".concat(e))).catch(async e=>{await (0,C.Z)("WiFi Error: ".concat(e))}),setTimeout(()=>{(0,p.GI)().then(async()=>{await (0,p.Hu)(b,P),console.log("Connected, saved network".concat(b,":").concat(P))}).finally(()=>{n(),H(!1)})},g.Z.NETWORK_TIMEOUT))};return(0,i.useEffect)(()=>{D()},[]),(0,i.useEffect)(()=>{!b&&(null==e?void 0:e.ssid)?k(e.ssid):!b&&F&&F[0]&&k(F[0])},[e,F]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"block text-center",children:[!e&&!s&&(0,t.jsx)("p",{children:"Getting WiFi information..."})||s?(0,t.jsx)("p",{children:"Enter your WiFi name (SSID) and password to connect."}):(0,t.jsxs)("h3",{children:[null==e?void 0:e.ssid," ",null==e?void 0:e.quality," ",(0,t.jsx)(r.Z,{})]}),(0,t.jsxs)(c.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,t.jsx)(c.ZP,{item:!0,xs:9,children:F&&(0,t.jsx)(o.Z,{autoComplete:!0,autoHighlight:!0,clearOnEscape:!0,freeSolo:!0,openOnFocus:!0,ref:_,disabled:W||R,options:F,sx:{width:"100%"},renderInput:e=>(0,t.jsx)(d.Z,{...e,label:"Network"}),inputValue:b,onChange:(e,n)=>{n&&(k(n),M())},onBlur:M,onInputChange:(e,n)=>{k(n)}})}),(0,t.jsx)(c.ZP,{item:!0,xs:3,children:(0,t.jsxs)(v.z,{onClick:D,className:"text-md flex h-full w-full gap-2",children:[W?(0,t.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.Z,{})," ","Refresh"]})}),(0,t.jsx)(c.ZP,{item:!0,xs:9,children:(0,t.jsx)(d.Z,{ref:S,label:"Password",variant:"outlined",value:P,sx:{width:"100%"},type:I?"password":"text",onChange:e=>{var n;y(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,t.jsx)(c.ZP,{item:!0,xs:3,children:(0,t.jsx)(v.z,{onClick:()=>T(!I),className:"text-md flex h-full w-full gap-2",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{})," Show"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Z,{})," Hide"]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2",children:[(0,t.jsxs)(v.z,{onClick:G,className:(0,Z.cn)(E,"text-xl"),children:[W||R?(0,t.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(a.Z,{fontSize:"inherit"}),"Connect"]}),(0,t.jsx)(v.z,{disabled:!(null==e?void 0:e.ssid),className:(0,Z.cn)(E,"text-xl"),children:(null==e?void 0:e.ssid)?(0,t.jsxs)(w(),{href:"/dashboard",children:["Dashboard ",(0,t.jsx)(l.Z,{})]}):(0,t.jsxs)(t.Fragment,{children:["Dashboard ",(0,t.jsx)(l.Z,{})]})})]})]})]})})}}},function(e){e.O(0,[664,169,220,37,774,888,179],function(){return e(e.s=503)}),_N_E=e.O()}]);