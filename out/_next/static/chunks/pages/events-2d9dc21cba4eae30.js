(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{5378:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return r(4761)}])},802:function(t,e,r){"use strict";r.d(e,{d:function(){return s},z:function(){return u}});var n=r(5893),o=r(7294),c=r(8426),i=r(2003),a=r(7537);let s=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=o.forwardRef((t,e)=>{let{className:r,variant:o,size:i,asChild:u=!1,...l}=t,d=u?c.g7:"button";return(0,n.jsx)(d,{className:(0,a.cn)(s({variant:o,size:i,className:r})),ref:e,...l})});u.displayName="Button"},1473:function(t,e,r){"use strict";r.d(e,{FS:function(){return x},ld:function(){return P},uT:function(){return f},Od:function(){return w},I_:function(){return g},GI:function(){return h},M7:function(){return v},sc:function(){return y},wl:function(){return p},Sj:function(){return m},b:function(){return b},Hu:function(){return E},Cz:function(){return _}});var n=r(9734),o=r(5752),c=r(7478),i=r(8893),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,c.H_)(async()=>{try{var r,n;if(!(null===(n=window.pywebview)||void 0===n?void 0:null===(r=n.api)||void 0===r?void 0:r[t]))throw Error("API endpoint not found");await (0,i.Z)("PyCall ".concat(t),e);let o=await window.pywebview.api[t](e).then(t=>JSON.parse(t)).then(async e=>{if(null==e?void 0:e.error)throw e.error;if(void 0===e.message)throw Error("Response message was empty ".concat(e));return await (0,i.Z)("Pycall ".concat(t," returned: ").concat(e.message),e),e.message});return o}catch(r){let e="".concat(r);throw r instanceof Error&&(e=r.message),await (0,i.Z)("Pycall ".concat(t," (retrying): ").concat(e)),Error(e)}},o.Z.RETRY_DELAY,o.Z.MAX_RETRIES).catch(async e=>{let r="".concat(t," - ").concat(e);throw e instanceof Error&&(r=e.message),await (0,i.Z)("Pycall ".concat(t," - FATAL ERROR: ").concat(r)),Error(r)})};let s=t=>a("get",{key:t}).then(t=>{console.log("Got: ",t);try{return JSON.parse(t)}catch(e){return t}}).catch(t=>(console.log("pyget error: ".concat(t)),"")),u=(t,e)=>(console.log("Setting: ".concat(t,", ").concat(e)),a("set",{key:t,data:e}).catch(t=>(console.log("Pyset error: ",t),""))),l=()=>a("deviceOn").catch(()=>"error"),d=()=>a("deviceOff").catch(()=>"error"),f=()=>a("getDeviceStatus").catch(()=>"error"),w=()=>a("getHardwareId").catch(()=>""),h=async()=>{let t=await (0,c.Vs)(a("checkWifiConnection").catch(()=>!1),o.Z.NETWORK_TIMEOUT);return t},g=()=>a("getIpAddress").catch(()=>""),v=()=>s("network_list"),y=async()=>{let t=await a("getTemperatureHumidity").catch(()=>({temperature:"---",humidity:"---"}));return t},p=async()=>{let t=await a("getWifiInfo").catch(()=>({ssid:"error",quality:0})),e=Math.round(Number.parseInt(t.quality,10)/70*100);return{ssid:t.ssid,quality:e}},m=async()=>{let t=await a("getWifiNetworks").catch(()=>""),e=t.split("ESSID:").map(t=>t.trim().replace(/^"|"$/g,"")).filter((t,e,r)=>r.indexOf(t)===e).filter(t=>t);return e},b=async t=>{console.log("setDevicePower> Setting device power to ".concat(t)),await (0,n.JG)("/device-power",t),t?console.log(await l()):console.log(await d())},_=async(t,e)=>{let r=await a("setWifiNetwork",{ssid:t,password:e});return r},E=async(t,e)=>{let r=await s("network_list"),n="object"==typeof r?await u("network_list",{...r,[t]:e}):await u("network_list",{[t]:e});return n},x=t=>a("add_cron_job",{cron:t}).catch(t=>"createCron error: ".concat(t)),P=async()=>{let t=await a("list_cron_jobs").catch(t=>"getCrons error: ".concat(t));return t}},8893:function(t,e,r){"use strict";var n=r(5752),o=r(7478);let c=async function(t){for(var e,r,c=arguments.length,i=Array(c>1?c-1:0),a=1;a<c;a++)i[a-1]=arguments[a];(null===(r=window.pywebview)||void 0===r?void 0:null===(e=r.api)||void 0===e?void 0:e.log)?(console.log("[Pylog] ".concat(t),...i),await (0,o.Vs)((async()=>(await window.pywebview.api.log(t),!0))(),n.Z.TIMEOUT).catch(e=>console.log("[Pylog] ".concat(t," error: ").concat(e)))):console.log("[Pylog Error] ".concat(t),...i)};e.Z=c},4761:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return s}});var n=r(5893),o=r(802),c=r(1473),i=r(8893),a=r(1163);function s(){let t=(0,a.useRouter)(),e=(0,c.ld)().then(t=>((0,i.Z)(t),t));return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Events"}),JSON.stringify(e),(0,n.jsx)(o.z,{onClick:()=>t.push("/events/create"),children:"Create new event"})]})}},7478:function(t,e,r){"use strict";r.d(e,{H_:function(){return c},Vs:function(){return n}});let n=(t,e)=>{let r;return Promise.race([t,new Promise((t,n)=>r=setTimeout(()=>n(Error("timeout")),e))]).finally(()=>clearTimeout(r))},o=t=>new Promise(e=>setTimeout(e,t)),c=(t,e,r)=>new Promise((n,i)=>t().then(n).catch(a=>r>0?o(e).then(c.bind(null,t,e,r-1)).then(n).catch(t=>{let e="Operation failed";t instanceof Error&&(e=t.message),i(e)}):i(a)))}},function(t){t.O(0,[436,774,888,179],function(){return t(t.s=5378)}),_N_E=t.O()}]);